@namespace StoneHammer.Components

@if (IsVisible)
{
    <div class="modal-backdrop">
        <div class="modal-content">
            <h3>@Title</h3>
            <p>@Message</p>
            <div class="modal-buttons">
                <button class="btn-confirm" @onclick="Confirm">Yes, Enter</button>
                <button class="btn-cancel" @onclick="Cancel">Cancel</button>
            </div>
        </div>
    </div>
}

@code {
    public bool IsVisible { get; private set; }
    public string Title { get; private set; } = "Confirm";
    public string Message { get; private set; } = "Are you sure?";

    private TaskCompletionSource<bool>? _tcs;

    public async Task<bool> Show(string title, string message)
    {
        Title = title;
        Message = message;
        IsVisible = true;
        StateHasChanged();

        _tcs = new TaskCompletionSource<bool>();
        return await _tcs.Task;
    }

    private void Confirm()
    {
        IsVisible = false;
        StateHasChanged();
        _tcs?.TrySetResult(true);
    }

    private void Cancel()
    {
        IsVisible = false;
        StateHasChanged();
        _tcs?.TrySetResult(false);
    }
}

<style>
    .modal-backdrop {
        position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
        background: rgba(0, 0, 0, 0.7);
        display: flex; justify-content: center; align-items: center;
        z-index: 10000;
        animation: fadeIn 0.2s;
    }

    .modal-content {
        background: #1a1a1a;
        border: 2px solid #555;
        padding: 20px;
        min-width: 300px;
        text-align: center;
        color: white;
        box-shadow: 0 0 20px rgba(0,0,0,0.8);
    }

    .modal-content h3 { margin-top: 0; color: #ffeb3b; }

    .modal-buttons {
        margin-top: 20px;
        display: flex; justify-content: center; gap: 10px;
    }

    .btn-confirm {
        background: #4caf50; color: white; border: none; padding: 10px 20px; cursor: pointer;
        font-weight: bold; text-transform: uppercase;
    }
    .btn-confirm:hover { background: #45a049; }

    .btn-cancel {
        background: #f44336; color: white; border: none; padding: 10px 20px; cursor: pointer;
        font-weight: bold; text-transform: uppercase;
    }
    .btn-cancel:hover { background: #d32f2f; }
</style>
